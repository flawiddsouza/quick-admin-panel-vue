import{pushScopeId as t,popScopeId as e,ref as a,computed as i,openBlock as s,createBlock as n,createVNode as l,renderSlot as r,withDirectives as o,vModelText as c,Fragment as h,renderList as g,unref as d,createCommentVNode as p,createTextVNode as u,toDisplayString as m,vModelCheckbox as b,withScopeId as f}from"vue";t("data-v-07f129fb");const v={style:{display:"flex","flex-direction":"column",height:"100vh"}},y={style:{display:"flex","align-items":"center"}},P=l("div",{style:{height:"100%",width:"200px","font-size":"1.5rem",display:"flex","justify-content":"center","align-items":"center"}}," Software Logo ",-1),k={style:{display:"flex",flex:"1"}},w={style:{position:"sticky",top:"0",padding:"0.7rem 0.5rem","background-color":"var(--sidebar-background-color, brown)"}},x={class:"sidebar-item"},C={class:"content"};e();const S={expose:[],props:{sidebarItems:Array},setup(t){const e=t,p=a(""),u=i((()=>p.value?e.sidebarItems.filter((t=>t.name.toLowerCase().includes(p.value.toLowerCase()))):e.sidebarItems)),m=a(null);return(t,e)=>(s(),n("div",v,[l("nav",y,[r(t.$slots,"navbar",{},(()=>[P]),{},!0)]),l("div",k,[l("aside",null,[l("div",w,[o(l("input",{type:"search",placeholder:"Search...",class:"sidebar-filter","onUpdate:modelValue":e[1]||(e[1]=t=>p.value=t)},null,512),[[c,p.value]])]),(s(!0),n(h,null,g(d(u),(e=>(s(),n("div",x,[r(t.$slots,"sidebar-item",{sidebarItem:e,selectSidebarItem:()=>m.value=e,isActive:m.value&&m.value.name===e.name},void 0,!0)])))),256))]),l("div",C,[r(t.$slots,"default",{},void 0,!0)])])]))},__scopeId:"data-v-07f129fb"};const F={props:{route:String,fields:Array,itemActionsWidth:String,bus:Object,tableHeight:String,limit:Number,checkboxes:Boolean,checkboxField:String,selectedCheckboxes:Array,hideItemActionsColumn:Boolean,demo:{type:Boolean,default:!1}},data:()=>({filter:"",items:[],paginator:{currentPage:null,firstPage:1,lastPage:null,from:null,to:null,total:null,unfilteredTotal:null},pageSwitch:4,sortField:"",previousSortField:"",sortOrder:"asc",loading:!1,refreshingDataTable:!1,selectedCheckboxesVirtual:[],currentDataFreshnessTimestamp:null}),watch:{route(){this.route&&(this.sortField="",this.previousSortField="",this.sortOrder="asc",this.fetchItemsForPage(1,!0,!0))},selectedCheckboxesVirtual(){this.$emit("update:selectedCheckboxes",this.selectedCheckboxesVirtual)}},computed:{itemActionsSlotExists(){return this.$slots["item-actions"]&&!1===this.hideItemActionsColumn},selectedItemsCountText(){return this.selectedCheckboxes&&this.selectedCheckboxes.length>0?`(${this.selectedCheckboxes.length} selected)`:""}},methods:{debounce(t,e,a){var i;return function(){var s=this,n=arguments,l=function(){i=null,a||t.apply(s,n)},r=a&&!i;clearTimeout(i),i=setTimeout(l,e),r&&t.apply(s,n)}},debouncedFetch:(I=function(){this.fetchItemsForPage(1,!1,!0)},T=250,function(){var t=this,e=arguments,a=function(){A=null,$||I.apply(t,e)},i=$&&!A;clearTimeout(A),A=setTimeout(a,T),i&&I.apply(t,e)}),filterItems(){this.pageSwitch=4,this.debouncedFetch()},sortColumn(t){this.sortField=t,this.previousSortField!==this.sortField?this.sortOrder="asc":"asc"===this.sortOrder?this.sortOrder="desc":this.sortOrder="asc",this.previousSortField=this.sortField,this.fetchItemsForPage(1,!1,!0)},fetchItemsForPage(t,e=!1,a=!1){if(t===this.paginator.currentPage&&!a)return;if(t===this.paginator.firstPage&&(this.pageSwitch=4),t===this.paginator.lastPage){let t=this.paginator.lastPage-2;t>=4&&(this.pageSwitch=t)}if(t===this.paginator.lastPage-1){let t=this.paginator.lastPage-1-1;t>=4&&(this.pageSwitch=t)}this.paginator.lastPage<=4&&this.pageSwitch<this.paginator.lastPage&&(this.pageSwitch=4),e||(t==this.pageSwitch&&(this.paginator.lastPage-2===this.pageSwitch||this.pageSwitch+1>this.paginator.lastPage||this.paginator.lastPage>5&&this.pageSwitch++),t<this.paginator.currentPage&&(this.pageSwitch-1>3&&this.pageSwitch-1<this.paginator.lastPage-3&&this.pageSwitch--,this.paginator.currentPage===this.paginator.lastPage-4&&this.pageSwitch-1>=4&&this.pageSwitch--,t===this.pageSwitch-3&&t>1&&this.pageSwitch--)),this.paginator.currentPage=t,this.loading=!0;var i=this.route.split("?");if(i=i.length>1?this.route+"&":this.route+"?",this.checkboxes&&(this.selectedCheckboxesVirtual=[],this.$emit("update:selectedCheckboxes",[]),this.$refs.selectAllCheckboxesInput&&(this.$refs.selectAllCheckboxesInput.checked=!1)),this.demo){this.items=[];for(let e=0;e<20;e++){let a={};this.fields.forEach(((i,s)=>{a[i.field]=`Row ${e+1+(1===t?0:10*t)} Column ${s+1}`})),this.items.push(a)}return this.paginator.currentPage=t,this.paginator.lastPage=8,this.paginator.from=1===t?1:10*t+1,this.paginator.to=1===t?20:10*t+20,this.paginator.total=160,this.paginator.unfilteredTotal=160,this.loading=!1,this.refreshingDataTable=!1,void this.$emit("loaded")}let s=(new Date).getTime();axios.get(`${i}page=${t}&filter=${encodeURIComponent(this.filter)}&sort_by=${this.sortField}&sort_order=${this.sortOrder}&limit=${this.limit?this.limit:""}`).then((t=>{(t=t.data).paginator?this.currentDataFreshnessTimestamp&&this.currentDataFreshnessTimestamp>s||(this.currentDataFreshnessTimestamp=s,this.items=t.paginator.data,this.paginator.currentPage=t.paginator.current_page,this.paginator.lastPage=t.paginator.last_page,this.paginator.from=t.paginator.from,this.paginator.to=t.paginator.to,this.paginator.total=t.paginator.total,this.paginator.unfilteredTotal=t.unfiltered_total,this.loading=!1,this.refreshingDataTable=!1,this.$emit("loaded")):console.error("%cDataTable","font-weight: bold","Given route does not implement laravel pagination")}))},refreshDataTable(){this.refreshingDataTable=!0,this.fetchItemsForPage(this.paginator.currentPage,!1,!0)},selectAllCheckboxes(t){this.selectedCheckboxesVirtual=[],t.target.checked&&this.items.forEach((t=>{this.selectedCheckboxesVirtual.push(t[this.checkboxField])}))}},created(){this.route&&this.fetchItemsForPage(1,!0),this.bus&&this.bus.on("refreshDataTable",(()=>{this.refreshDataTable()})),this.checkboxes&&this.$emit("update:selectedCheckboxes",[])}};var I,T,$,A;const D=f("data-v-51041034");t("data-v-51041034");const L={class:"datatable"},V={style:{display:"flex","justify-content":"space-between","align-items":"flex-start"}},N=u(" Refresh"),O=l("br",null,null,-1),_={key:0,style:{width:"45px","min-width":"45px"}},E={key:0},M=l("td",{colspan:"100%",class:"ta-c"},"Loading",-1),W={key:0,class:"ta-c",style:{width:"45px","min-width":"45px"}},X={key:2,class:"ta-c"},j={key:0},B=l("td",{colspan:"100%",class:"ta-c"},"No records found",-1),U=l("br",null,null,-1),z={class:"f-l"},H=l("span",null,"...",-1);e();const R=D(((t,e,a,i,d,f)=>(s(),n("div",L,[l("div",V,[l("div",null,[r(t.$slots,"actions",{},void 0,!0)]),l("div",null,[l("button",{onClick:e[1]||(e[1]=(...t)=>f.refreshDataTable&&f.refreshDataTable(...t))},[l("i",{class:["fas fa-sync-alt",{"fa-spin":d.refreshingDataTable}]},null,2),N]),o(l("input",{type:"search","onUpdate:modelValue":e[2]||(e[2]=t=>d.filter=t),onInput:e[3]||(e[3]=(...t)=>f.filterItems&&f.filterItems(...t)),style:{"margin-left":"0.5em"},placeholder:"Search..."},null,544),[[c,d.filter]])])]),O,l("div",{class:"table-container",style:{height:a.tableHeight}},[l("table",null,[l("thead",null,[l("tr",null,[a.checkboxes?(s(),n("th",_,[d.items.length>0?(s(),n("input",{key:0,type:"checkbox",onChange:e[4]||(e[4]=(...t)=>f.selectAllCheckboxes&&f.selectAllCheckboxes(...t)),ref:"selectAllCheckboxesInput"},null,544)):p("",!0)])):p("",!0),f.itemActionsSlotExists?(s(),n("th",{key:1,style:{width:a.itemActionsWidth,minWidth:a.itemActionsWidth}},"Actions",4)):p("",!0),(s(!0),n(h,null,g(a.fields,(t=>{var e;return s(),n("th",{class:{active:d.sortField===t.field},style:{width:null!=(e=t.width)&&e},onClick:e=>f.sortColumn(t.field)},[u(m(t.label)+" ",1),l("span",{class:["arrow","asc"===d.sortOrder?"asc":"desc"]},null,2)],14,["onClick"])})),256))])]),l("tbody",null,[!a.route||d.loading?(s(),n("tr",E,[M])):(s(),n(h,{key:1},[(s(!0),n(h,null,g(d.items,((i,c)=>(s(),n("tr",null,[a.checkboxes?(s(),n("td",W,[o(l("input",{type:"checkbox",value:i[a.checkboxField],"onUpdate:modelValue":e[5]||(e[5]=t=>d.selectedCheckboxesVirtual=t)},null,8,["value"]),[[b,d.selectedCheckboxesVirtual]])])):p("",!0),f.itemActionsSlotExists&&0===c?(s(),n("td",{key:1,class:"ta-c",style:{width:a.itemActionsWidth,minWidth:a.itemActionsWidth}},[r(t.$slots,"item-actions",{item:i},void 0,!0)],4)):p("",!0),f.itemActionsSlotExists&&0!==c?(s(),n("td",X,[r(t.$slots,"item-actions",{item:i},void 0,!0)])):p("",!0),(s(!0),n(h,null,g(a.fields,(t=>(s(),n("td",null,m(i[t.field]),1)))),256))])))),256)),0===d.items.length?(s(),n("tr",j,[B])):p("",!0)],64))])])],4),U,l("div",z,[d.paginator.total>0?(s(),n(h,{key:0},[u(" From "+m(d.paginator.from)+" to "+m(d.paginator.to)+" of "+m(d.paginator.total)+" entries (filtered from "+m(d.paginator.unfilteredTotal)+" total records) "+m(f.selectedItemsCountText),1)],64)):(s(),n(h,{key:1},[u(" No records were found (filtered from "+m(d.paginator.unfilteredTotal)+" total records) ",1)],64))]),l("div",{class:["paginator f-r",{"disable-all":d.loading}]},[l("button",{onClick:e[6]||(e[6]=t=>f.fetchItemsForPage(d.paginator.firstPage)),disabled:d.paginator.firstPage===d.paginator.currentPage},"First",8,["disabled"]),l("button",{onClick:e[7]||(e[7]=t=>f.fetchItemsForPage(d.paginator.currentPage-1)),disabled:d.paginator.firstPage===d.paginator.currentPage},"<",8,["disabled"]),d.paginator.lastPage>=d.pageSwitch-3?(s(),n("button",{key:0,onClick:e[8]||(e[8]=t=>f.fetchItemsForPage(d.pageSwitch-3)),class:{active:d.pageSwitch-3===d.paginator.currentPage}},m(d.pageSwitch-3),3)):p("",!0),d.paginator.lastPage>=d.pageSwitch-2?(s(),n("button",{key:1,onClick:e[9]||(e[9]=t=>f.fetchItemsForPage(d.pageSwitch-2)),class:{active:d.pageSwitch-2===d.paginator.currentPage}},m(d.pageSwitch-2),3)):p("",!0),d.paginator.lastPage>=d.pageSwitch-1?(s(),n("button",{key:2,onClick:e[10]||(e[10]=t=>f.fetchItemsForPage(d.pageSwitch-1)),class:{active:d.pageSwitch-1===d.paginator.currentPage}},m(d.pageSwitch-1),3)):p("",!0),d.paginator.lastPage>=d.pageSwitch?(s(),n("button",{key:3,onClick:e[11]||(e[11]=t=>f.fetchItemsForPage(d.pageSwitch)),class:{active:d.pageSwitch===d.paginator.currentPage}},m(d.pageSwitch),3)):p("",!0),d.paginator.lastPage>4?(s(),n(h,{key:4},[H,d.paginator.lastPage-1>0&&d.paginator.firstPage!==d.paginator.lastPage-1&&d.paginator.lastPage-1>4?(s(),n("button",{key:0,onClick:e[12]||(e[12]=t=>f.fetchItemsForPage(d.paginator.lastPage-1)),class:{active:d.paginator.lastPage-1===d.paginator.currentPage}},m(d.paginator.lastPage-1),3)):p("",!0),d.paginator.lastPage!==d.paginator.firstPage?(s(),n("button",{key:1,onClick:e[13]||(e[13]=t=>f.fetchItemsForPage(d.paginator.lastPage)),class:{active:d.paginator.lastPage===d.paginator.currentPage}},m(d.paginator.lastPage),3)):p("",!0)],64)):p("",!0),l("button",{onClick:e[14]||(e[14]=t=>f.fetchItemsForPage(d.paginator.currentPage+1)),disabled:d.paginator.lastPage===d.paginator.currentPage},">",8,["disabled"]),l("button",{onClick:e[15]||(e[15]=t=>f.fetchItemsForPage(d.paginator.lastPage)),disabled:d.paginator.lastPage===d.paginator.currentPage},"Last",8,["disabled"])],2)]))));F.render=R,F.__scopeId="data-v-51041034";var G={install:(t,e)=>{t.config.globalProperties.$loading={show(){let t=document.createElement("div");return t.innerHTML='\n                    <style>\n                    .vld-overlay {\n                        bottom: 0;\n                        left: 0;\n                        position: absolute;\n                        right: 0;\n                        top: 0;\n                        align-items: center;\n                        display: none;\n                        justify-content: center;\n                        overflow: hidden;\n                        z-index: 1\n                    }\n\n                    .vld-overlay.is-active {\n                        display: flex\n                    }\n\n                    .vld-overlay.is-full-page {\n                        z-index: 999;\n                        position: fixed\n                    }\n\n                    .vld-overlay .vld-background {\n                        bottom: 0;\n                        left: 0;\n                        position: absolute;\n                        right: 0;\n                        top: 0;\n                        background: #fff;\n                        opacity: 0.5\n                    }\n\n                    .vld-overlay .vld-icon, .vld-parent {\n                        position: relative\n                    }\n                    </style>\n                    <div tabindex="0" aria-label="Loading" class="vld-overlay is-active is-full-page" aria-busy="true" style="">\n                        <div class="vld-background" style="background: black; opacity: 0.5;"></div>\n                        <div class="vld-icon">\n                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" height="128" width="128" fill="white">\n                                <rect x="0" y="13" width="4" height="5">\n                                    <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="10" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="20" y="13" width="4" height="5"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate>\n                                </rect>\n                            </svg>\n                        </div>\n                    </div>\n                ',document.body.appendChild(t),t.hide=t.remove,t}},t.provide("$loading",t.config.globalProperties.$loading)}};export{S as Container,F as DataTable,G as loading};
